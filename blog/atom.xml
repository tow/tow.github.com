<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>EADDRINUSE blog</title><link href="http://eaddrinu.se/blog/atom.xml" rel="self"/><link href="http://eaddrinu.se"/><updated>2009-12-12T00:20:19Z</updated><id>http://eaddrinu.se</id><entry><title>Postfix on Leopard.</title><author><name>Toby White</name></author><link href="http://eaddrinu.se/blog/2009/setting-up-postfix.html"/><updated>2000-01-01T00:00:00Z</updated><published>2009-11-24T23:03:37Z</published><id>http://eaddrinu.se/blog/2009/setting-up-postfix.html</id><content type="html">
       
&lt;p&gt;I recently re-installed Leopard on my shiny new MacBook Pro. I use it primarily for development, and at least one of the projects I&amp;#8217;m developing needs to send mail. So I wanted to get postfix&amp;nbsp;working.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;dquo&quot;&gt;&amp;#8220;&lt;/span&gt;Working&amp;#8221; means accepting mail from localhost, and sending mail via an &lt;span class=&quot;caps&quot;&gt;SMTP&lt;/span&gt; server somewhere. The most obviously accessible &lt;span class=&quot;caps&quot;&gt;SMTP&lt;/span&gt; server is gmail, of&amp;nbsp;course.&lt;/p&gt;
&lt;p&gt;There&amp;#8217;s a few places here &lt;span class=&quot;amp&quot;&gt;&amp;amp;&lt;/span&gt; there which tell you bits about how to get the Max &lt;span class=&quot;caps&quot;&gt;OS&lt;/span&gt; X postfix working against gmail, but nothing comprehensive. And too many of them involved editing fragile config&amp;nbsp;files.&lt;/p&gt;
&lt;p&gt;However, after some poking and prodding, this below seems to do the trick; and all with fairly obviously-reversible&amp;nbsp;commands.&lt;/p&gt;
&lt;p&gt;&lt;tt&gt;$MAIL_DOMAIN&lt;/tt&gt; should be some domain you&amp;#8217;re entitled to send mail for; in my case, this was simply &amp;#8220;eaddrinu.se&amp;#8221;. Set &lt;tt&gt;GMAIL_USERNAME&lt;/tt&gt; and &lt;tt&gt;GMAIL_PASSWORD&lt;/tt&gt; as&amp;nbsp;appropriate.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;sudo sh -c &lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;launchctl unload /System/Library/LaunchDaemons/org.postfix.master.plist&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;defaults write /System/Library/LaunchDaemons/org.postfix.master OnDemand -bool false&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;postconf -e myhostname=$&lt;span class=&quot;caps&quot;&gt;MAILNAME&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;postconf -e relayhost=smtp.gmail.com:587&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;echo smtp.gmail.com:587 $GMAIL_USERNAME@gmail.com:$GMAIL_PASSWORD &amp;gt;&amp;gt; /etc/postfix/sasl_passwd&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;postconf -e smtp_sasl_password_maps=hash:/etc/postfix/sasl_passwd&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;postmap /etc/postfix/sasl_passwd&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;postconf -e smtp_sasl_auth_enable=yes&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;postconf -e smtp_use_tls=yes&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;postconf -e smtp_tls_security_level=encrypt&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;postconf -e smtp_sasl_security_options=&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;postconf -e tls_random_source=dev:/dev/urandom&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;defaults write /System/Library/LaunchDaemons/org.postfix.master RunAtLoad -bool true&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;launchctl load /System/Library/LaunchDaemons/org.postfix.master.plist&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;



   </content></entry></feed>